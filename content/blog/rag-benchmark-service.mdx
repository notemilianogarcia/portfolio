---
title: "Building an Evaluation-First RAG System"
summary: "A benchmark-driven RAG system for scientific question answering, designed to demonstrate disciplined evaluation, system design, and end-to-end ML engineering."
date: "2026-01-30"
tags: ["RAG", "Python", "Evaluation", "ML Engineering", "MLOps"]
---

# Building an Evaluation-First RAG System

Over time, I've worked on many machine learning components in isolation: models, experiments, evaluation scripts, services, and production tooling. This project was a way to bring those pieces together into a single, coherent system and present how I approach building ML systems in practice.

Building an Evaluation-First RAG System is not about inventing a new technique or creating a flashy demo. It's about showing how I design, evaluate, and operate a retrieval-augmented generation system when correctness, reliability, and long-term iteration matter.

## What this project is

At its core, this is a benchmark-driven RAG system for scientific question answering built on the SciFact dataset. The system retrieves relevant scientific claims and uses them to generate grounded answers with explicit citations, abstaining when the evidence is insufficient.

What distinguishes the project is not the use of RAG itself, but how the system is structured and validated. Retrieval is treated as a first-class component, evaluation is central, and every improvement is justified through metrics rather than intuition.

## Why evaluation comes first

In many RAG implementations, generation quality is judged informally: answers "look good," so the system is assumed to be working. My approach is different.

This system starts with explicit retrieval baselines and offline evaluation using standard information retrieval metrics such as **Recall@K**, **nDCG@K**, and **MRR@K**. Lexical (BM25) and dense (FAISS-based) retrievers share a unified interface and produce versioned artifacts that can be compared side-by-side.

Only once retrieval quality is measured and understood does generation enter the picture. Even then, the generator is constrained: it must ground answers in retrieved evidence, include citations, and explicitly refuse to answer when retrieval confidence is low.

## How the system is structured

The project is organized as a clean, modular pipeline:

- A **data and benchmark layer** handles dataset download, validation, and basic statistics.
- A **retrieval layer** implements both lexical and dense retrieval with deterministic, versioned indexing.
- An **evaluation harness** produces reproducible comparison reports across retrievers.
- A **grounded RAG layer** generates citation-backed answers with abstention behavior.
- A **FastAPI service**, packaged with Docker, exposes retrieval and question-answering endpoints.
- A **monitoring and lifecycle layer** logs requests, detects drift, schedules re-evaluation, and gates promotion of new retrievers.

Each stage has a clear responsibility and interfaces designed to support safe iteration.

## Operating the system over time

Beyond building the pipeline, I wanted to reflect how ML systems behave after deployment.

The service logs structured request data such as query characteristics, latency, similarity score distributions, and abstention flags. These logs are used to compute drift signals that are meaningful for retrieval systems, rather than generic feature statistics.

Drift does not automatically trigger retraining. Instead, it triggers scheduled re-evaluation against the benchmark. Promotion is gated: a new retriever is promoted only if it improves key metrics without regressing others. The active production retriever is selected via an explicit pointer file, making changes auditable and reversible.

## What this project demonstrates

This project reflects how I approach applied ML work:

- **Evaluation discipline over intuition.**
- **Baselines and comparisons before optimization.**
- **System design that supports monitoring and iteration.**
- **Clear operational boundaries between experimentation and production.**
- **Honest behavior when evidence is weak.**

It's not meant to capture every skill or tool I've worked with. Instead, it's a focused example of how I think about building reliable, measurable ML systems end-to-end.

## Final thoughts

This project is intentionally straightforward in scope and explicit in its assumptions. Rather than hiding complexity behind abstractions, it makes decisions visible and measurable.

The full technical details live in the repository, and the project page summarizes the architecture and components. This post provides the context behind why the system was built this way and how it reflects the way I approach machine learning in practice.

<div className="mt-12 pt-8 border-t border-border">
	<div className="flex flex-wrap gap-4">
		<a 
			href="https://github.com/notemilianogarcia/rag-benchmark-service"
			target="_blank"
			rel="noopener noreferrer"
			className="inline-flex items-center gap-2 rounded-lg bg-accent px-6 py-3 text-sm font-bold text-bg hover:opacity-90 transition-opacity"
		>
			<svg className="w-5 h-5 shrink-0" fill="currentColor" viewBox="0 0 24 24">
				<path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v 3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
			</svg>
			<span>View on GitHub</span>
		</a>
		<a 
			href="/projects/rag-benchmark-service"
			className="inline-flex items-center gap-2 rounded-lg px-6 py-3 text-sm font-bold text-bg hover:opacity-90 transition-opacity"
			style={{ backgroundColor: '#FF5370' }}
		>
			<svg className="w-5 h-5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
				<path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
			</svg>
			<span>View Project Page</span>
		</a>
	</div>
</div>
